<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>函数闭包</title>
</head>
<body>
<script type="text/javascript">


    //闭包：函数使用函数之外定义的变量并且不需要传递参数

    /*--------------------------------------------
     这段代码中，脚本被载入内存后，并没有为函数sayHelloWorld()计算变量Smessage的值，该函数捕获Smessage的值，sMessage将在函数调用sayHelloWorld()时，最后一行被赋值，显示消息hello world
     ---------------------------------------------- */
    var sMessage = "hello world";//申明全局变量，存入栈内存中

    function sayHelloWorld() {
        alert(sMessage);
    }
    sayHelloWorld();


    /*--------------------------------------------
     函数addNum()包括函数doAdd()(闭包）。内部函数是一个闭包，因为他将获取外部参数inum1 和 inum2以及全局变量ibasenum的值。addnum()的最后一步调用了doAdd().把俩个参数和全局变量相加，并返回它们的和。
     这里要掌握的重要概念是，doadd()函数根本不接受参数，它使用的值都是从执行环境中获取的，外层函数如果不是闭包则需要传参数。
     ----------------------------------------------*/
    var iBaseNum = 10;
    function addNum(iNum1, iNum2) {
        function doAdd() {
            return iNum1 + iNum2 + iBaseNum;
        }

        return doAdd();
    }
    alert(addNum(1, 2));



    function countNum(num){
        return function(toAdd){
            return num + toAdd;
        }
    }
     var result = countNum(5);
    alert(result(5));//总共传入俩次值一个是num5,一个是toAdd5.

</script>
</body>
</html>